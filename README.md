# BatchClip

BatchClip 是一个基于 Electron + React + TypeScript 的桌面视频批处理工具，面向“多视频、多片段、可选 LUT”的高效导出流程。

当前版本：`1.0.1`

![界面截图](./docs/screenshot.png)

## 功能概览

- 视频队列管理：一次导入多个视频，随时切换当前视频进行剪辑。
- 多片段标记：每个视频可标记多个片段，支持快捷键 `I` / `O`。
- LUT 导入与预览：支持导入 `.cube`，可开启/关闭 LUT 预览。
- LUT 强度调节：在主页面时间轴上方直接调节 `0%~100%`，并应用到预览与导出。
- 批量导出片段：一键导出队列中全部视频的全部片段。
- LUT 全量导出：不切片，直接将队列中全部视频按当前 LUT + 强度批量导出。
- 兼容预览模式：遇到解码问题时可切换兼容预览。
- 中英文界面：支持 English / 中文 切换。

## 安装与开发

### 环境要求

- Node.js 18+
- npm

### 安装依赖

```bash
npm install
```

### 本地开发

```bash
npm run dev
```

### 代码检查

```bash
npm run lint
```

## 构建

### Windows

```bash
npm run build
# 或
npm run build:win
```

如果遇到 Windows 符号链接权限问题，可使用：

```bash
npm run build:win:ps1
```

### macOS

```bash
npm run build:mac
```

### 同时尝试构建 Win + mac

```bash
npm run build:all
```

## 使用说明

1. 导入视频：可拖拽到主界面，或在队列中批量添加。
2. 标记片段：播放时使用 `I` 设置入点、`O` 设置出点。
3. 切换视频：在“队列”弹窗中选择要编辑的视频。
4. LUT 设置：在设置中导入 `.cube`，启用 LUT 预览。
5. 强度调节：启用 LUT 预览后，在时间轴上方调节 LUT 百分比并应用。
6. 导出片段：点击“批量导出所有片段”。
7. LUT 全量导出：启用 LUT 后，可点击“批量导出全部视频(LUT)”进行不切片导出。

## 导出命名规则

- 片段导出：`<原视频名>_clip_01.mov`、`<原视频名>_clip_02.mov`...
- LUT 全量导出：`<原视频名>_lut.mov`
- 若重名，自动追加后缀避免覆盖。

## 编码与性能策略

- 预览优先：默认优先直接预览原视频，必要时再使用兼容预览转码。
- LUT 预览：预览代理使用低负载参数以提升交互速度。
- 导出质量策略：保持原视频分辨率，并尽量对齐源视频码率目标。
- 编码器回退：
  - Windows：优先 `h264_nvenc` / `h264_qsv` / `h264_amf`，失败自动回退 `libx264`。
  - macOS：优先 `h264_videotoolbox`，失败自动回退 `libx264`。

## 项目结构
```
├── electron/           # Electron 主进程
│   ├── main.ts        # 主进程入口
│   └── preload.ts     # 预加载脚本
├── src/               # React 前端
│   ├── App.tsx        # 主应用组件
│   └── components/    # UI 组件
│       ├── VideoPlayer.tsx
│       └── Timeline.tsx
└── public/            # 静态资源
```

## 未来计划

以下功能计划在未来版本中实现（优先级由高到低）：

1.  **灵活命名**: 支持修改每个片段的导出名称，支持在设置中自定义默认文件名前缀。
2.  **标签系统**: 支持为片段设置标签，导出时自动将标签拼接到文件名前端（例如：`标签1_标签2_文件名

## License

MIT
